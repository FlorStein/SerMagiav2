<!DOCTYPE html><html lang="es"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Test - Galer√≠a Ser Magia</title><style>body{font-family:system-ui,-apple-system,sans-serif;max-width:900px;margin:40px auto;padding:20px;background:#1a0b2e;color:#fff}h1{color:#f2bb66}.test-section{background:rgba(255,255,255,.1);border-radius:12px;padding:20px;margin:20px 0}.status{padding:10px 15px;border-radius:8px;margin:10px 0;font-weight:600}.success{background:rgba(34,197,94,.2);color:#4ade80}.error{background:rgba(239,68,68,.2);color:#f87171}.warning{background:rgba(251,191,36,.2);color:#fbbf24}button{background:#f2bb66;color:#1a0b2e;border:none;padding:12px 24px;border-radius:8px;font-weight:600;cursor:pointer;margin:10px 5px 10px 0}button:hover{background:#f8d09c}input{width:100%;padding:10px;border-radius:6px;border:1px solid rgba(255,255,255,.2);background:rgba(0,0,0,.3);color:#fff;font-family:monospace;margin:10px 0}.gallery-preview{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:15px;margin-top:20px}.gallery-preview img{width:100%;height:150px;object-fit:cover;border-radius:8px;border:2px solid rgba(255,255,255,.2)}code{background:rgba(0,0,0,.4);padding:2px 6px;border-radius:4px;font-size:.9em}pre{background:rgba(0,0,0,.4);padding:15px;border-radius:8px;overflow-x:auto;font-size:.85em}</style></head><body><h1>üß™ Test de Galer√≠a - Ser Magia</h1><div class="test-section"><h2>1. Test de Google Apps Script API</h2><p>Prob√° si tu API de Google Apps Script est√° funcionando correctamente.</p><label>URL de la API:</label> <input type="text" id="api-url" placeholder="https://script.google.com/macros/s/YOUR_ID/exec" value=""> <button onclick="testAPI()">Probar API</button><div id="api-result"></div></div><div class="test-section"><h2>2. Test de ID individual de Google Drive</h2><p>Prob√° si un ID de foto de Drive se puede cargar.</p><label>ID de la imagen:</label> <input type="text" id="image-id" placeholder="1ABC123xyz456" value=""> <button onclick="testImageID()">Probar ID</button><div id="id-result"></div></div><div class="test-section"><h2>3. Test de m√∫ltiples IDs</h2><p>Prob√° varios IDs a la vez (uno por l√≠nea).</p><label>IDs de im√°genes (uno por l√≠nea):</label> <textarea id="multiple-ids" rows="5" style="width:100%;padding:10px;border-radius:6px;background:rgba(0,0,0,.3);color:#fff;font-family:monospace;border:1px solid rgba(255,255,255,.2)" placeholder="1ABC123xyz456
1DEF789abc123
1GHI456def789"></textarea> <button onclick="testMultipleIDs()">Probar IDs</button><div id="multiple-result"></div></div><div class="test-section"><h2>üìñ Instrucciones</h2><p><strong>C√≥mo obtener el ID de una imagen de Google Drive:</strong></p><ol style="line-height:1.8"><li>Abr√≠ Google Drive y busc√° tu imagen</li><li>Click derecho ‚Üí <strong>"Obtener enlace"</strong></li><li>Asegurate de que sea <strong>"Cualquier persona con el enlace"</strong></li><li>La URL se ve as√≠: <code>https://drive.google.com/file/d/<strong>1ABC123xyz</strong>/view</code></li><li>Copi√° solo la parte marcada en negrita (el ID)</li></ol><p style="margin-top:20px"><strong>C√≥mo crear una API de Google Apps Script:</strong></p><p>Segu√≠ las instrucciones en <code>README-GALERIA-SETUP.md</code></p></div><script>async function testAPI(){const e=document.getElementById("api-url").value.trim(),n=document.getElementById("api-result");if(e){n.innerHTML='<div class="status">‚è≥ Probando API...</div>';try{const t=await fetch(e,{cache:"no-store"}),r=t.headers.get("content-type");if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);if(!r||!r.includes("application/json")){await t.text();throw new Error(`La API no devuelve JSON. Content-Type: ${r||"none"}\n\nDevolvi√≥ HTML o texto plano. Verific√° que el script est√© desplegado correctamente como "Aplicaci√≥n web" con acceso p√∫blico.`)}const i=await t.json();if(!Array.isArray(i))throw new Error("La respuesta no es un array");if(0===i.length)return void(n.innerHTML='<div class="status warning">‚ö†Ô∏è La API funciona pero devuelve un array vac√≠o (sin im√°genes)</div>');const s=i[0];if(!s.url&&!s.id)return void(n.innerHTML=`\n            <div class="status warning">‚ö†Ô∏è Las im√°genes no tienen formato correcto</div>\n            <p style="margin-top: 10px;">Se esperaba: <code>{"name": "...", "url": "..."}</code></p>\n            <p>Se recibi√≥:</p>\n            <pre>${JSON.stringify(s,null,2)}</pre>\n          `);n.innerHTML=`\n          <div class="status success">‚úÖ API funcionando correctamente - ${i.length} imagen(es) encontrada(s)</div>\n          <p style="margin-top: 10px;"><strong>Primeras im√°genes:</strong></p>\n          <pre>${JSON.stringify(i.slice(0,3),null,2)}</pre>\n          <div class="gallery-preview">\n            ${i.slice(0,6).map(e=>`\n              <div>\n                <img src="${e.url||"https://drive.google.com/uc?export=view&id="+e.id}" \n                     alt="${e.name||"Imagen"}"\n                     onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22100%22 height=%22100%22%3E%3Ctext x=%2250%25%22 y=%2250%25%22 text-anchor=%22middle%22 fill=%22red%22%3E‚ùå%3C/text%3E%3C/svg%3E'" />\n                <p style="font-size: 0.75em; margin-top: 5px; text-align: center;">${e.name||"Sin nombre"}</p>\n              </div>\n            `).join("")}\n          </div>\n        `}catch(e){n.innerHTML=`\n          <div class="status error">‚ùå Error: ${e.message}</div>\n          <p style="margin-top: 10px;"><strong>Posibles causas:</strong></p>\n          <ul style="margin-left: 20px; line-height: 1.6;">\n            <li>El script no est√° desplegado como "Aplicaci√≥n web"</li>\n            <li>El acceso no est√° configurado como "Cualquier usuario"</li>\n            <li>La URL es incorrecta</li>\n            <li>El script tiene errores</li>\n          </ul>\n        `,console.error("Error completo:",e)}}else n.innerHTML='<div class="status warning">‚ö†Ô∏è Ingres√° una URL de API</div>'}function testImageID(){const e=document.getElementById("image-id").value.trim(),n=document.getElementById("id-result");if(!e)return void(n.innerHTML='<div class="status warning">‚ö†Ô∏è Ingres√° un ID de imagen</div>');const t=`https://drive.google.com/uc?export=view&id=${e}`;n.innerHTML=`\n        <div class="status success">‚úÖ ID v√°lido - probando carga...</div>\n        <p style="margin-top: 10px;">URL generada:</p>\n        <pre>${t}</pre>\n        <p style="margin-top: 10px;"><strong>Preview:</strong></p>\n        <div style="text-align: center; margin-top: 15px;">\n          <img \n            src="${t}" \n            alt="Test imagen" \n            style="max-width: 300px; border-radius: 8px; border: 2px solid rgba(255,255,255,0.2);"\n            onload="document.getElementById('load-status').innerHTML = '<div class=\\'status success\\'>‚úÖ Imagen cargada correctamente</div>'"\n            onerror="document.getElementById('load-status').innerHTML = '<div class=\\'status error\\'>‚ùå Error cargando imagen. Verific√° que:<br/>- El ID sea correcto<br/>- La imagen tenga permisos p√∫blicos (\\'Cualquier persona con el enlace\\')</div>'"\n          />\n        </div>\n        <div id="load-status" style="margin-top: 15px;"></div>\n      `}function testMultipleIDs(){const e=document.getElementById("multiple-ids").value.trim(),n=document.getElementById("multiple-result");if(!e)return void(n.innerHTML='<div class="status warning">‚ö†Ô∏è Ingres√° al menos un ID</div>');const t=e.split("\n").map(e=>e.trim()).filter(e=>e.length>0);if(0===t.length)return void(n.innerHTML='<div class="status warning">‚ö†Ô∏è No se encontraron IDs v√°lidos</div>');const r=t.map((e,n)=>({id:e,url:`https://drive.google.com/uc?export=view&id=${e}`,name:`Imagen ${n+1}`}));n.innerHTML=`\n        <div class="status success">‚úÖ ${t.length} ID(s) encontrado(s)</div>\n        <p style="margin-top: 10px;"><strong>Array para copiar en galeria-vinito.html:</strong></p>\n        <pre>const IMAGE_IDS = [\n  '${t.join("',\n  '")}',\n];</pre>\n        <p style="margin-top: 15px;"><strong>Preview de las im√°genes:</strong></p>\n        <div class="gallery-preview">\n          ${r.map((e,n)=>`\n            <div>\n              <img \n                src="${e.url}" \n                alt="${e.name}"\n                onerror="this.style.border='2px solid red'; this.alt='‚ùå Error: ID ${n+1}'"\n              />\n              <p style="font-size: 0.7em; margin-top: 5px; text-align: center;">#${n+1}</p>\n            </div>\n          `).join("")}\n        </div>\n        <p style="margin-top: 15px; font-size: 0.85em; opacity: 0.8;">\n          üí° Si alguna imagen muestra borde rojo, ese ID no funciona (verific√° permisos o que el ID sea correcto)\n        </p>\n      `}</script></body></html>